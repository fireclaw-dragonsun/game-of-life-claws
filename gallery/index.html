<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dragon Castle Gallery — Cellular Automata Art</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;600&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --bg: #0a0a0f;
    --text: #8a8a9a;
    --text-bright: #c8c8d8;
    --gold: #d4a846;
    --gold-dim: rgba(212, 168, 70, 0.3);
    --panel-bg: rgba(10, 10, 15, 0.92);
    --border: rgba(212, 168, 70, 0.12);
  }

  html, body {
    min-height: 100%;
    background: var(--bg);
    color: var(--text);
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
    font-weight: 300;
  }

  /* ─── HEADER ─── */
  header {
    text-align: center;
    padding: 60px 40px 40px;
  }

  header h1 {
    font-size: 16px;
    font-weight: 600;
    letter-spacing: 8px;
    text-transform: uppercase;
    color: var(--gold);
    opacity: 0.8;
    margin-bottom: 16px;
  }

  header p {
    font-size: 12px;
    letter-spacing: 2px;
    color: var(--text);
    opacity: 0.6;
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.8;
  }

  header .original-link {
    display: inline-block;
    margin-top: 20px;
    padding: 8px 24px;
    border: 1px solid var(--border);
    color: var(--gold);
    text-decoration: none;
    font-size: 10px;
    letter-spacing: 3px;
    text-transform: uppercase;
    transition: all 0.3s ease;
  }

  header .original-link:hover {
    background: rgba(212, 168, 70, 0.08);
    border-color: var(--gold-dim);
  }

  /* ─── GALLERY GRID ─── */
  .gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 24px;
    padding: 40px;
    max-width: 1200px;
    margin: 0 auto;
  }

  .card {
    background: var(--panel-bg);
    border: 1px solid var(--border);
    padding: 0;
    transition: all 0.3s ease;
    text-decoration: none;
    display: block;
    overflow: hidden;
  }

  .card:hover {
    border-color: var(--gold-dim);
    transform: translateY(-2px);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  }

  .card-preview {
    width: 100%;
    height: 200px;
    position: relative;
    overflow: hidden;
  }

  .card-preview canvas {
    width: 100%;
    height: 100%;
  }

  .card-info {
    padding: 20px 24px;
  }

  .card-info h2 {
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 4px;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 8px;
  }

  .card-info .rules {
    font-size: 11px;
    letter-spacing: 2px;
    color: var(--text-bright);
    opacity: 0.6;
    margin-bottom: 8px;
  }

  .card-info .description {
    font-size: 11px;
    line-height: 1.6;
    color: var(--text);
    opacity: 0.7;
  }

  .card-info .theme-tag {
    display: inline-block;
    margin-top: 12px;
    padding: 3px 10px;
    font-size: 9px;
    letter-spacing: 2px;
    text-transform: uppercase;
    border: 1px solid var(--border);
    color: var(--text);
    opacity: 0.5;
  }

  /* ─── SIGIL ─── */
  footer {
    text-align: center;
    padding: 60px 40px;
    font-size: 9px;
    letter-spacing: 4px;
    color: var(--gold);
    opacity: 0.15;
    line-height: 1.8;
  }

  /* ─── MINI CANVAS PREVIEWS ─── */
  .preview-canvas {
    display: block;
    width: 100%;
    height: 100%;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .card {
    animation: fadeIn 0.6s ease backwards;
  }

  .card:nth-child(1) { animation-delay: 0.1s; }
  .card:nth-child(2) { animation-delay: 0.2s; }
  .card:nth-child(3) { animation-delay: 0.3s; }
  .card:nth-child(4) { animation-delay: 0.4s; }
  .card:nth-child(5) { animation-delay: 0.5s; }
  .card:nth-child(6) { animation-delay: 0.6s; }
</style>
</head>
<body>

<header>
  <h1>Dragon Castle Gallery</h1>
  <p>Cellular automata variations generated by the curiosity engine.<br>
  Each piece explores different rules of life, death, and emergence.</p>
  <a href="/game-of-life-claws/" class="original-link">View Original &mdash; Game of Life: Claws</a>
</header>

<div class="gallery" id="gallery">
  <!-- GALLERY_ENTRIES_START -->
  <a class="card" href="coral.html">
    <div class="card-preview">
      <canvas class="preview-canvas" data-birth="3" data-survive="4,5,6,7,8" data-density="0.18" data-bg="0, 26, 44" data-cell="#00bcd4" data-glow="#4dd0e1"></canvas>
    </div>
    <div class="card-info">
      <h2>Coral</h2>
      <div class="rules">B3/S45678</div>
      <div class="description">Slow coral growth from scattered seeds. Patient beauty.</div>
      <span class="theme-tag">Ocean Deep</span>
    </div>
  </a>

  <a class="card" href="daynight.html">
    <div class="card-preview">
      <canvas class="preview-canvas" data-birth="3,6,7,8" data-survive="3,4,6,7,8" data-density="0.5" data-bg="13, 0, 26" data-cell="#b388ff" data-glow="#d1b3ff"></canvas>
    </div>
    <div class="card-info">
      <h2>Day & Night</h2>
      <div class="rules">B3678/S34678</div>
      <div class="description">Symmetric, explosive, beautiful. Dead and alive are equals.</div>
      <span class="theme-tag">Aurora</span>
    </div>
  </a>

  <a class="card" href="highlife.html">
    <div class="card-preview">
      <canvas class="preview-canvas" data-birth="3,6" data-survive="2,3" data-density="0.2" data-bg="10, 10, 10" data-cell="#00ff41" data-glow="#50ff80"></canvas>
    </div>
    <div class="card-info">
      <h2>HighLife</h2>
      <div class="rules">B36/S23</div>
      <div class="description">Replicators emerge from chaos. Life finds a way to copy itself.</div>
      <span class="theme-tag">Neon Cyber</span>
    </div>
  </a>

  <a class="card" href="morley.html">
    <div class="card-preview">
      <canvas class="preview-canvas" data-birth="3,6,8" data-survive="2,4,5" data-density="0.25" data-bg="26, 0, 0" data-cell="#ff1744" data-glow="#ff5252"></canvas>
    </div>
    <div class="card-info">
      <h2>Morley (Move)</h2>
      <div class="rules">B368/S245</div>
      <div class="description">Complex chaotic patterns. Named for Stephen Morley.</div>
      <span class="theme-tag">Blood Moon</span>
    </div>
  </a>

  <a class="card" href="replicator.html">
    <div class="card-preview">
      <canvas class="preview-canvas" data-birth="1,3,5,7" data-survive="1,3,5,7" data-density="0.03" data-bg="13, 0, 26" data-cell="#b388ff" data-glow="#d1b3ff"></canvas>
    </div>
    <div class="card-info">
      <h2>Replicator</h2>
      <div class="rules">B1357/S1357</div>
      <div class="description">Perfect self-replication. Every pattern copies itself endlessly.</div>
      <span class="theme-tag">Aurora</span>
    </div>
  </a>

  <a class="card" href="seeds.html">
    <div class="card-preview">
      <canvas class="preview-canvas" data-birth="2" data-survive="" data-density="0.02" data-bg="26, 10, 0" data-cell="#ff6b35" data-glow="#ff9a6c"></canvas>
    </div>
    <div class="card-info">
      <h2>Seeds</h2>
      <div class="rules">B2/S-</div>
      <div class="description">Nothing survives, yet everything explodes. Pure ephemeral beauty.</div>
      <span class="theme-tag">Ember</span>
    </div>
  </a>
  <!-- GALLERY_ENTRIES_END -->
</div>

<footer>
  Dragon Castle Gallery<br>
  Algorithmic Art &mdash; Est. 2026
</footer>

<script>
// Mini Game of Life previews on each card
document.querySelectorAll('.preview-canvas').forEach(canvas => {
  const ctx = canvas.getContext('2d');
  const cellSize = 6;
  const birth = canvas.dataset.birth ? canvas.dataset.birth.split(',').map(Number) : [];
  const survive = canvas.dataset.survive ? canvas.dataset.survive.split(',').map(Number) : [];
  const density = parseFloat(canvas.dataset.density) || 0.15;
  const bgRGB = canvas.dataset.bg || '10,10,15';
  const cellColor = canvas.dataset.cell || '#d4a846';
  const glowColor = canvas.dataset.glow || '#f5d576';

  // Set canvas resolution
  const rect = canvas.parentElement.getBoundingClientRect();
  canvas.width = rect.width * 2;
  canvas.height = rect.height * 2;
  ctx.scale(2, 2);

  const w = rect.width;
  const h = rect.height;
  const cols = Math.floor(w / cellSize);
  const rows = Math.floor(h / cellSize);

  let grid = new Uint8Array(cols * rows);
  let prev = new Uint8Array(cols * rows);

  // Initialize random
  for (let i = 0; i < grid.length; i++) {
    grid[i] = Math.random() < density ? 1 : 0;
  }

  function idx(x, y) { return y * cols + x; }

  function countN(x, y) {
    let c = 0;
    for (let dy = -1; dy <= 1; dy++) {
      for (let dx = -1; dx <= 1; dx++) {
        if (dx === 0 && dy === 0) continue;
        c += grid[idx((x + dx + cols) % cols, (y + dy + rows) % rows)];
      }
    }
    return c;
  }

  function step() {
    prev.set(grid);
    const next = new Uint8Array(cols * rows);
    for (let y = 0; y < rows; y++) {
      for (let x = 0; x < cols; x++) {
        const n = countN(x, y);
        if (grid[idx(x, y)]) {
          next[idx(x, y)] = survive.includes(n) ? 1 : 0;
        } else {
          next[idx(x, y)] = birth.includes(n) ? 1 : 0;
        }
      }
    }
    grid = next;
  }

  function draw() {
    ctx.fillStyle = `rgba(${bgRGB}, 0.6)`;
    ctx.fillRect(0, 0, w, h);
    const gap = 1;
    const s = cellSize - gap * 2;
    for (let y = 0; y < rows; y++) {
      for (let x = 0; x < cols; x++) {
        if (grid[idx(x, y)]) {
          ctx.fillStyle = !prev[idx(x, y)] ? glowColor : cellColor;
          ctx.shadowColor = cellColor;
          ctx.shadowBlur = 3;
          ctx.fillRect(x * cellSize + gap, y * cellSize + gap, s, s);
          ctx.shadowBlur = 0;
        }
      }
    }
  }

  // Run a few initial steps silently, then animate
  for (let i = 0; i < 5; i++) step();

  let frame = 0;
  function animate() {
    if (frame % 3 === 0) step();
    draw();
    frame++;
    if (frame < 300) requestAnimationFrame(animate);
  }

  // Stagger starts
  const delay = Math.random() * 500;
  setTimeout(() => requestAnimationFrame(animate), delay);
});
</script>

</body>
</html>
